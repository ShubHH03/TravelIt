<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Adventure</title>
    <link rel="stylesheet" href="/newrev.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
</head>

<body class="has-animations">
    <script src="https://unpkg.com/scrollreveal@4.0.0/dist/scrollreveal.min.js"></script>
    <script src="js/production.js"></script>
    <div class="boxr">
        <button style="margin-top: 50px;margin-left: 30px;" type="button" class="positive-btn rBtn"
            id="positiveBtn">POSITIVE
            REVIEWS</button>
        <button style="margin-left: 180px;margin-top: 50px;" type="button" class="negative-btn rBtn"
            id="negativeBtn">NEGATIVE
            REVIEWS</button>
        <div class="carousel" id="reviews-container">
        </div>
    </div>
    <script>
        $(document).ready(function () {
            const positiveBtn = document.getElementById('positiveBtn');
            const negativeBtn = document.getElementById('negativeBtn');
            const place = 'Imagica Water Park';
            positiveBtn.addEventListener('click', function () {
                fetchAndDisplayReviews2('fetchPositive', place);
            });
            negativeBtn.addEventListener('click', function () {
                fetchAndDisplayReviews2('fetchNegative', place);
            });
            function fetchAndDisplayReviews(sentiment) {
                const url = `http://127.0.0.1:3000/getreviews?place=${encodeURIComponent(place)}`;
                $.ajax({
                    type: "GET",
                    url: url,
                    contentType: "application/json",
                    success: function (response) {
                        console.log(`Received reviews for ${place}: `, response);
                        displayReviews(response);
                    },
                    error: function (error) {
                        console.error("Error fetching reviews:", error);
                    },
                });
            }
            function fetchAndDisplayReviews2(action, place) {
                $.ajax({
                    type: "POST",
                    url: "http://127.0.0.1:3000/action",
                    contentType: "application/json",
                    data: JSON.stringify({ action: action, place: place }),
                    success: function (response) {
                        console.log("Received specific reviews:", place, response);
                        displayReviews(response.data);
                    },
                    error: function (error) {
                        console.error("Error fetching reviews:", error);
                    },
                });
            }
            function displayReviews(reviews) {
                const reviewsContainer = $("#reviews-container");
                reviewsContainer.empty();
                reviews.forEach((review) => {
                    const reviewElement = `
                              <div class="carousel-item" href="#">
                                  <div class="testi">
                                      <div class="img-area">
                                          <img src="${review.image_url}" alt="img">
                                      </div>
                                      <p>"${review.comment}"</p>
                                      <h4>${review.name}</h4>
                                  </div>
                              </div>
                          `;
                    reviewsContainer.append(reviewElement);
                });
                $(".carousel").carousel({
                    padding: 200,
                });
            }
            fetchAndDisplayReviews(place);
        });
    </script>
</body>

</html>